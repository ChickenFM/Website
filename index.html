<html>
    <head>
            <meta charset="utf-8"/>
            <link rel="stylesheet" type="text/css" href="style.css">
            <title>Chicken FM &bull; Your Chicken Station</title>
            <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300">
            <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">  
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
            <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pnotify/3.0.0/pnotify.js?1568124206"></script>
            <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
            <script type="text/javascript" src="pnotify/dist/iife/PNotify.js"></script>
            <script type="text/javascript" src="pnotify/dist/iife/PNotifyButtons.js"></script>
            <link href="pnotify/dist/PNotifyBrightTheme.css" rel="stylesheet" type="text/css" />
            <script type="text/javascript" src="/chickenfm.js"></script>
            <link rel="manifest" href="/manifest.json">

            <!--Meta tags-->
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <meta name="apple-mobile-web-app-capable" content="yes">
            <meta name="apple-mobile-web-app-status-bar-style" content="black">
            <meta name="apple-mobile-web-app-title" content="Weather PWA">
            <link rel="apple-touch-icon" href="/images/icons/icon-152x152.png">
            <meta name="theme-color" content="#0034FF" />
            <meta name="title" content="ChickenFM - Your Chicken Station">
            <meta name="keywords" content="ChickenFM, chickenfm, chicken fm, chicken, free radio, chickens, good music">
            <meta name="robots" content="index, follow">
            <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
            <meta name="language" content="English">
            <meta name="revisit-after" content="14 days">
            <!--Thanks to @DawsonX#9322 on discord :)-->
             <meta name="description" content="This is ChickenFM, sotp listening to bad music or else you're bald. We play the latest hits ad free!">
             <meta property="og:description" content="This is ChickenFM, sotp listening to bad music or else you're bald. We play the latest hits ad free!">
             <meta name="author" content="TheChicken">

             <!--OG metatags-->
             <meta property="og:title" content="ChickenFM - Your Chicken Station">
             <meta property="og:description" content="This is ChickenFM, your chicken station. sotp listening to bad music or else you're bald. We play the latest hits ad free!">
             <meta property="og:image" content="https://chickenfm.ga/images/background.jpg">
             <meta property="og:url" content="https://chickenfm.ga">
             <meta property="og:site_name" content="ChickenFM">


            <!--Twitter meta tags-->
            <meta property="twitter:title" content="ChickenFM">
            <meta property="twitter:description" content="This is ChickenFM, your chicken station. sotp listening to bad music or else you're bald. We play the latest hits ad free!">
            <meta property="twitter:image" content="https://chickenfm.ga/images/background.jpg">
            <meta property="twitter:url" content="https://chickenfm.ga">
            <meta name="twitter:card" content="summary_large_image">
            <meta name="twitter:site" content="@skeppy_chicken">
             <!--Register service worker-->
             <script>// CODELAB: Register service worker.
              if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                  navigator.serviceWorker.register('/service-worker.js')
                      .then((reg) => {
                        console.log('Service worker registered.', reg);
                      });
                });
              };</script>
            <!--Pnotify to notify you about the developement hihi-->
            <script>function showStackTopCenter(type) {
              if (typeof window.stackTopCenter === 'undefined') {
                window.stackBottomRight = {
                  'dir1': 'up',
                  'dir2': 'left',
                  'firstpos1': 25,
                  'firstpos2': 25
                };
              }
              var opts = {
                title: 'Over Here',
                text: "Check me out. I'm in a different stack.",
                stack: window.stackBottomRight
              };
              switch (type) {
                case 'error':
                  opts.title = 'Oh No';
                  opts.text = 'Watch out for that water tower!';
                  opts.type = 'error';
                  break;
                case 'info':
                  opts.title = 'Still in developement';
                  opts.text = 'ChickenFM.ga is still in developement. If you experience any issues, send a DM to trashcan#2971 on discord.';
                  opts.type = 'info';
                  break;
                case 'success':
                  opts.title = 'Good News Everyone';
                  opts.text = "I've invented a device that bites shiny metal asses.";
                  opts.type = 'success';
                  break;
              }
              PNotify.alert(opts);
            }
            </script>
            <!-- <iframe src="https://radio.viberadio.pw/public/chickenfm" frameborder="0" allowtransparency="true" style="background-image: url('https://pbs.twimg.com/media/D_9RmzaWwAAzhWM?format=jpg&name=900x900'); width: 100%; height: 100%; min-height: 100%;"></iframe> --> 


            <script type="text/javascript">
                // Popup window code
                function newPopup(url) {
                        popupWindow = window.open(
                                url,'popUpWindow','height=750,width=500,left=10,top=10,resizable=yes,scrollbars=yes,toolbar=no,menubar=no,location=no,directories=no,status=yes')
                }
                </script>

 
    </head>
    <body onload="playing()">
<div id="bg"></div>
                    <div class="topnav" id="myTopnav">
                        <a href="index.html" class="active">Home</a>
                      <div id="request"><a href="#" id="myBtn">Request songs</a></div>
                        <!--<a href="JavaScript:newPopup('previous.html');">Previous songs (coming soon)</a>-->
                        <a href="https://discord.gg/pYFx3xK">Discord Server</a>
                        <a href="#popup1">Suggest songs</a>
                        <a href="javascript:void(0);" class="icon" onclick="topnav()">
                          <i class="fa fa-bars"></i>
                        </a>
                    </div>
                  <div class="empty"></div>
                    <script>
                        function topnav() {
                          var x = document.getElementById("myTopnav");
                          if (x.className === "topnav") {
                            x.className += " responsive";
                          } else {
                            x.className = "topnav";
                          }
                        }
                        </script>

                        <div id="popup1" class="overlay">
                            <div class="popup">
                              <h2>Suggest songs</h2>
                              <a class="close" href="#">&times;</a>
                              <div class="content">
                                <!--<form onsubmit="sendMessage()">-->
                                <label for="name">Name: </label><br>
                                <input id="name" type="text" class="request" autofocus="autofocus" placeholder="Name" required="requeired" autocomplete="off"><br>
                                <label for="name">Song/message: </label><br>
                                <input id="message" type="text" class="request" required="required" placeholder="Song/Message" autocomplete="off"><br><br>
                                <div id="submiterror"></div>
                                <div id="submitreq"><button type="button" onclick="sendMessage()" value="Send message!">Send message!</button></div>
                                <!--</form>-->
                              </div>
                            </div>
                          </div>


            <!-- The Modal -->
            <div id="myModal" class="songreq">

              <!-- Modal content -->
              <div class="songreq-content">
                <div class="songreq-header">
                  <span class="close">&times;</span>
                  <h2>Request songs</h2>
                </div>
                <div class="songreq-body">
                      <iframe src="https://admin.chickenfm.ga/public/chickenfm/embed-requests" frameborder="0" allowtransparency="true" style="width: 100%; height: 75%; border: 0;"></iframe>
                </div>
                <div class="songreq-footer">
                  <h3>ChickenFM</h3>
                </div>
              </div>
            
            </div>
                    <script>
                                // Get the modal
                                var modal = document.getElementById("myModal");
                                
                                // Get the button that opens the modal
                                var btn = document.getElementById("myBtn");
                                
                                // Get the <span> element that closes the modal
                                var span = document.getElementsByClassName("close")[0];
                                
                                // When the user clicks the button, open the modal 
                                btn.onclick = function() {
                                  modal.style.display = "block";
                                }
                                
                                // When the user clicks on <span> (x), close the modal
                                span.onclick = function() {
                                  modal.style.display = "none";
                                }
                                
                                // When the user clicks anywhere outside of the modal, close it
                                window.onclick = function(event) {
                                  if (event.target == modal) {
                                    modal.style.display = "none";
                                  }
                                }
                                </script>


                                
            <div class="player player-body">
              <!--<div id="coverimg" class="djimage"></div>-->
              <img class="djimage" id="coverimg" style="float:left;" src="s" />
              <!--<h3 style="color:#ffffff;">ChickenFM is unfortunately down. We will be back on air as soon as possible</h3>-->
              <!--<iframe src="http://157.245.33.91/public/chickenfm/embed" frameborder="0" allowtransparency="false" style="width: 100%; min-height: 150px; border: 0;"></iframe>-->
              <div class="nowplaying">
                <span class="dj" id="dj" style="float:right; color:white;">Now Playing:</span><br>
                <h3 id="track" class="track" style="float:right; color:white;">-</h3><br>
                <h5 id="artist" class="artist" style="float:right; color:white;">-</h5><br>
              </div>
              <!--<video controls="" autoplay="" name="media"><source src="http://157.245.33.91:8000/radio.mp3?1567750028" type="audio/mpeg"></video>-->
                <audio id="player" autoplay="false" volume="0"><source src="https://admin.chickenfm.ga/radio/8000/radio.mp3?1568647813" type="audio/mpeg"></audio>
                  <div style="color:white;width:fit-content;">
                      <div class="togglr"><i class="togl fa fa-play" style="text-align: center;"></i></div>
                      <input id="volumeslider" class="volume displaynone" type="range" min="0" max="100" value="50" step="1">
              </div>

              </div>  

              
              <script type="text/javascript">
                function playing() {
                  $.getJSON('https://admin.chickenfm.ga/api/nowplaying/1', (data) => {
                  var song = data.now_playing.song.artist + " - " +data.now_playing.song.title;
                  var track = data.now_playing.song.title;
                  var artist = data.now_playing.song.artist;
                  document.getElementById("track").innerHTML = track.toString();
                  document.getElementById("artist").innerHTML = artist.toString();
                  //var dj = data.live.streamer_name + ":";
                  var djstat = data.live.streamer_name;
                  document.getElementById("dj").innerHTML = dj.toString()
                  if(djstat == "") {
                    document.getElementById("dj").innerHTML = "AutoDJ";
                    //document.getElementById("request").innerHTML = `<a href="#" id="myBtn">Request songs</a>`;
                  } else {
                    document.getElementById("dj").innerHTML = djstat.toString();
                    //document.getElementById("request").innerHTML = `<a href="#popup1">Suggest songs</a>`;

                  } 

                  coversrc = data.now_playing.song.art;
                  //imagesrc = cover.toString();
                  //imagehtml = '<img src="'+imagesrc+'"></img>'
                  image = document.getElementById('coverimg');
                  image.src = coversrc.toString();
                  //image.innerHTML = imagehtml.toString()
                  //image.innerHTML = cover.toString();
                 
                  // When audio starts playing...
                  if ('mediaSession' in navigator) {
                  navigator.mediaSession.metadata = new MediaMetadata({
                      title: track,
                      artist: artist,
                      album: 'ChickenFM',
                      artwork: [
                          { src: coversrc.toString(), type: 'image/png' },
                    ]
                      });
                  navigator.mediaSession.setActionHandler('play', function(){
                    playRadio()
                  });
                  navigator.mediaSession.setActionHandler('pause', function(){
                    pauseRadio()
                      });
                    }   
                 });
                 setTimeout(playing, 5000);
               } 	playing();
              
               var stream = document.getElementById("player");
               stream.pause()
               //loadRadio()
               volumeslider = document.getElementById("volumeslider");
               volumeslider.addEventListener("mousemove", setvolume);
              function setvolume(){
	              stream.volume = volumeslider.value / 100;
              }
               showStackTopCenter('info');
              
              $('.togl').click(function(){
                toggleRadio();
              });
              function toggleRadio(){
                if (stream.paused){
                  playRadio();
                } else {
                  pauseRadio();
                }
              }
              function playRadio(){
                stream.src = "https://admin.chickenfm.ga/radio/8000/radio.mp3?1568647813";
                //stream.volume = 0;

                $('.togl').attr("class", "togl fas fa-circle-notch fa-spin");
                stream.play().then(function() {
                  stream.volume = 0.6;
                  $('.togl').attr("class", "togl fa fa-pause");
                  //Pnotify
                  $('.volume').attr("class", "volume")
                  stream.volume = volumeslider.value / 100;


                }).catch(function() {
                  pauseRadio();
                });
              }
              
              function pauseRadio(){
                stream.pause();
                stream.volume = 0;
                stream.src = "";
                $('.togl').attr("class", "togl fa fa-play");
                //Pnotify
                $('.volume').attr("class", "volume displaynone")
              }


              function volumeChange(){
                volumeslider = document.getElementById("volumeslider");
                stream.volume = volumeslider.value / 100;
                setTimeout(volumeChange, 1000);
              } volumeChange()
              
             /* $(".reqln").click(function(){
                $(".modal").show()
              })*/
              </script>
              <script>/*************************************/
// Low-poly Background animations

var refreshDuration = 10000;
        var refreshTimeout;
        var numPointsX;
        var numPointsY;
        var unitWidth;
        var unitHeight;
        var points;
        
        function onLoad()
        {
            var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            svg.setAttribute('width',window.outerWidth);
            svg.setAttribute('height',window.outerHeight);
            document.querySelector('#bg').appendChild(svg);
        
            var unitSize = (window.innerWidth+window.innerHeight)/15;
            numPointsX = Math.ceil(window.innerWidth/unitSize)+1;
            numPointsY = Math.ceil(window.innerHeight/unitSize)+1;
            unitWidth = Math.ceil(window.innerWidth/(numPointsX-1));
            unitHeight = Math.ceil(window.innerHeight/(numPointsY-1));
        
            points = [];
        
            for(var y = 0; y < numPointsY; y++) {
                for(var x = 0; x < numPointsX; x++) {
                    points.push({x:unitWidth*x, y:unitHeight*y, originX:unitWidth*x, originY:unitHeight*y});
                }
            }
        
            randomize();
        
            for(var i = 0; i < points.length; i++) {
                if(points[i].originX != unitWidth*(numPointsX-1) && points[i].originY != unitHeight*(numPointsY-1)) {
                    var topLeftX = points[i].x;
                    var topLeftY = points[i].y;
                    var topRightX = points[i+1].x;
                    var topRightY = points[i+1].y;
                    var bottomLeftX = points[i+numPointsX].x;
                    var bottomLeftY = points[i+numPointsX].y;
                    var bottomRightX = points[i+numPointsX+1].x;
                    var bottomRightY = points[i+numPointsX+1].y;
        
                    var rando = Math.floor(Math.random()*2);
        
                    for(var n = 0; n < 2; n++) {
                        var polygon = document.createElementNS(svg.namespaceURI, 'polygon');
        
                        if(rando==0) {
                            if(n==0) {
                                polygon.point1 = i;
                                polygon.point2 = i+numPointsX;
                                polygon.point3 = i+numPointsX+1;
                                polygon.setAttribute('points',topLeftX+','+topLeftY+' '+bottomLeftX+','+bottomLeftY+' '+bottomRightX+','+bottomRightY);
                            } else if(n==1) {
                                polygon.point1 = i;
                                polygon.point2 = i+1;
                                polygon.point3 = i+numPointsX+1;
                                polygon.setAttribute('points',topLeftX+','+topLeftY+' '+topRightX+','+topRightY+' '+bottomRightX+','+bottomRightY);
                            }
                        } else if(rando==1) {
                            if(n==0) {
                                polygon.point1 = i;
                                polygon.point2 = i+numPointsX;
                                polygon.point3 = i+1;
                                polygon.setAttribute('points',topLeftX+','+topLeftY+' '+bottomLeftX+','+bottomLeftY+' '+topRightX+','+topRightY);
                            } else if(n==1) {
                                polygon.point1 = i+numPointsX;
                                polygon.point2 = i+1;
                                polygon.point3 = i+numPointsX+1;
                                polygon.setAttribute('points',bottomLeftX+','+bottomLeftY+' '+topRightX+','+topRightY+' '+bottomRightX+','+bottomRightY);
                            }
                        }
                        polygon.setAttribute('fill','rgba(0,0,0,'+(Math.random()/3)+')');
                        var animate = document.createElementNS('http://www.w3.org/2000/svg','animate');
                        animate.setAttribute('fill','freeze');
                        animate.setAttribute('attributeName','points');
                        animate.setAttribute('dur',refreshDuration+'ms');
                        animate.setAttribute('calcMode','linear');
                        polygon.appendChild(animate);
                        svg.appendChild(polygon);
                    }
                }
            }
        
            refresh();
        
        }
        
        function randomize() {
            for(var i = 0; i < points.length; i++) {
                if(points[i].originX != 0 && points[i].originX != unitWidth*(numPointsX-1)) {
                    points[i].x = points[i].originX + Math.random()*unitWidth-unitWidth/2;
                }
                if(points[i].originY != 0 && points[i].originY != unitHeight*(numPointsY-1)) {
                    points[i].y = points[i].originY + Math.random()*unitHeight-unitHeight/2;
                }
            }
        }
        
        function refresh() {
            randomize();
            for(var i = 0; i < document.querySelector('#bg svg').childNodes.length; i++) {
                var polygon = document.querySelector('#bg svg').childNodes[i];
                var animate = polygon.childNodes[0];
                if(animate.getAttribute('to')) {
                    animate.setAttribute('from',animate.getAttribute('to'));
                }
                animate.setAttribute('to',points[polygon.point1].x+','+points[polygon.point1].y+' '+points[polygon.point2].x+','+points[polygon.point2].y+' '+points[polygon.point3].x+','+points[polygon.point3].y);
                animate.beginElement();
            }
            refreshTimeout = setTimeout(function() {refresh();}, refreshDuration);
        }
        
        function onResize() {
            document.querySelector('#bg svg').remove();
            clearTimeout(refreshTimeout);
            onLoad();
        }
        
        window.onload = onLoad;
        window.onresize = onResize;
        
// End of Low-poly background animations
</script>
        
        <div class="footer">
          <p>Made by <a href="https://twitter.com/skeppy_chicken">TheChicken</a>. Version <code>0.16</code></p>
        </div>
    </body>
</html>